!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t||self).palette={})}(this,function(t){function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function r(t,n){var r=n.naturalWidth,e=n.naturalHeight,a=t(r,e);return null==a||a.drawImage(n,0,0,r,e),null==a?void 0:a.getImageData(0,0,r,e)}function e(t,n,r){var e=n.naturalWidth,a=n.naturalHeight,o=e*a/r;if(o>1){var i=e/Math.sqrt(o),u=a/Math.sqrt(o),f=t(i,u);return null==f||f.drawImage(n,0,0,i,u),null==f?void 0:f.getImageData(0,0,i,u)}var l=t(e,a);return null==l||l.drawImage(n,0,0),null==l?void 0:l.getImageData(0,0,e,a)}function a(t,n){var r=document.createElement("canvas"),e=r.getContext("2d");return r.height=n,r.width=t,e}function o(t,n){return new OffscreenCanvas(t,n).getContext("2d")}function i(t,n){var r=t[0]-n[0],e=t[1]-n[1],a=t[2]-n[2],o=t[3]-n[3];return Math.sqrt(r*r+e*e+a*a+o*o)}function u(t,n){for(var r=0;r<t.length;r++)n[r]=t[r]}function f(t,n){for(var r=[],e=0;e<n;e++)r.push(t);return r}t.awaitImage=function(t){return new Promise(function(n,r){t.addEventListener("load",function(t){n(t)}),t.addEventListener("error",function(t){r(t)})})},t.euclidean_distance=i,t.hslaCSSText=function(t){return"hsla("+t[0]+"deg,"+100*t[1]+"%,"+100*t[2]+"%,"+t[3]+")"},t.kmeans=function(t,n,r){for(var e=[],a=[],o=[],l=0,c=0;c<n;c++)e.push(t[Math.floor(Math.random()*t.length)]),o.push(f(0,5));for(;l<r;){for(var d=0;d<t.length;d++){for(var s=t[d],g=0,h=i(s,e[0]),v=1;v<n;v++){var m=i(s,e[v]);m<h&&(h=m,g=v)}var p=o[g];p[0]+=s[0],p[1]+=s[1],p[2]+=s[2],p[3]+=s[3],p[4]++}for(var y=0,b=0;b<n;b++){var I=o[b],w=I[4];a[b]=0==w?t[Math.floor(Math.random()*t.length)]:[I[0]/w,I[1]/w,I[2]/w,I[3]/w],y+=i(e[b],a[b])}if(y<=1)return{cluster_center:a,iterate_time:l,fit_thresold:!0,label:o.map(function(t){return t[4]}),size:t.length};u(a,e),l++;for(var S=0;S<n;S++){var A=o[S];A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}}return{cluster_center:e,iterate_time:l,fit_thresold:!1,label:o.map(function(t){return t[4]}),size:t.length}},t.normalizeRGBA=function(t){return t.map(function(t){return t/255})},t.readImage=function(t){return r(a,t)},t.readImageAsync=function(t){return r(o,t)},t.readImageDownsampling=function(t,n){return e(a,t,n)},t.readImageDownsamplingAsync=function(t,n){return e(o,t,n)},t.rgbaCSSText=function(t){return"rgba("+t.map(function(t){return Math.floor(t)}).join(",")+")"},t.rgbaToHSLA=function(t){var n,r,e,a,o,i,u=(i=(e=t)[2],(a=e[0])>(o=e[1])?o>i?[a,i]:a>i?[a,o]:[i,o]:o>i?i>a?[o,a]:[o,i]:[i,a]),f=u[0],l=u[1],c=f-l,d=f+l;if(0==c)n=0,r=0;else{if(f==t[0]){var s=60*(t[1]-t[2])/c;n=s<0?s+360:s}else n=f==t[1]?60*(t[2]-t[0])/c+120:60*(t[0]-t[1])/c+240;r=0==d?0:d<=1?c/d:c/(2-d)}return[n,r,d/2,t[3]]},t.sortHSL=function(t){return void 0===t&&(t=[0,1,2,3]),function(r,e){for(var a,o,i=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t))){e&&(t=e);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(o=i()).done;){var u=o.value;if(0!=(a=r[u]-e[u]))return a}return a}},t.toPixel=function(t){for(var n=t.data,r=[],e=0;e<n.length;e+=4)r.push(n.slice(e,e+4));return r}});
//# sourceMappingURL=index.umd.js.map
